// Do not edit this file; automatically generated by build.py.
'use strict';

/*
 Licensed under the Apache License, Version 2.0 (the "License"):
          http://www.apache.org/licenses/LICENSE-2.0
*/
Blockly.Arduino=new Blockly.Generator("Arduino");Blockly.Arduino.addReservedWords("Blockly,setup,loop,if,else,for,switch,case,while,do,break,continue,return,goto,define,include,HIGH,LOW,INPUT,OUTPUT,INPUT_PULLUP,true,false,integer,constants,floating,point,void,boolean,char,unsigned,byte,int,word,long,float,double,string,String,array,static,volatile,const,sizeof,pinMode,digitalWrite,digitalRead,analogReference,analogRead,analogWrite,tone,noTone,shiftOut,shitIn,pulseIn,millis,micros,delay,delayMicroseconds,min,max,abs,constrain,map,pow,sqrt,sin,cos,tan,randomSeed,random,lowByte,highByte,bitRead,bitWrite,bitSet,bitClear,bit,attachInterrupt,detachInterrupt,interrupts,noInterrupts");
Blockly.Arduino.ORDER_ATOMIC=0;Blockly.Arduino.ORDER_UNARY_POSTFIX=1;Blockly.Arduino.ORDER_UNARY_PREFIX=2;Blockly.Arduino.ORDER_MULTIPLICATIVE=3;Blockly.Arduino.ORDER_ADDITIVE=4;Blockly.Arduino.ORDER_SHIFT=5;Blockly.Arduino.ORDER_RELATIONAL=6;Blockly.Arduino.ORDER_EQUALITY=7;Blockly.Arduino.ORDER_BITWISE_AND=8;Blockly.Arduino.ORDER_BITWISE_XOR=9;Blockly.Arduino.ORDER_BITWISE_OR=10;Blockly.Arduino.ORDER_LOGICAL_AND=11;Blockly.Arduino.ORDER_LOGICAL_OR=12;Blockly.Arduino.ORDER_CONDITIONAL=13;
Blockly.Arduino.ORDER_ASSIGNMENT=14;Blockly.Arduino.ORDER_NONE=99;Blockly.Arduino.DEF_FUNC_NAME=Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_;
Blockly.Arduino.init=function(a){Blockly.Arduino.includes_=Object.create(null);Blockly.Arduino.userClass_=Object.create(null);Blockly.Arduino.definitions_=Object.create(null);Blockly.Arduino.variables_=Object.create(null);Blockly.Arduino.codeFunctions_=Object.create(null);Blockly.Arduino.userFunctions_=Object.create(null);Blockly.Arduino.functionNames_=Object.create(null);Blockly.Arduino.setups_=Object.create(null);Blockly.Arduino.pins_=Object.create(null);Blockly.Arduino.variableDB_?Blockly.Arduino.variableDB_.reset():
Blockly.Arduino.variableDB_=new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_);Blockly.Arduino.instances_=Object.create(null);if(null!=a){a=a.getAllBlocks(!1);for(var b=0,c;c=a[b];b++)for(var d=null,e=0,f;f=c.inputList[e];e++){for(var h=0,k;k=f.fieldRow[h];h++)if(k instanceof Blockly.FieldInstanceInput&&(d=k.getInstanceDefined(),null!=d)){Blockly.Arduino.instances_[name]=c;break}if(null!=d)break}}};
Blockly.Arduino.finish=function(a){var b=[],c=[],d=[],e=[],f;for(f in Blockly.Arduino.includes_)b.push(Blockly.Arduino.includes_[f]);b.length&&b.push("\n");for(f in Blockly.Arduino.userClass_)b.push(Blockly.Arduino.userClass_[f]);b.length&&b.push("\n");for(f in Blockly.Arduino.variables_)d.push(Blockly.Arduino.variables_[f]);d.length&&d.push("\n");for(f in Blockly.Arduino.definitions_)c.push(Blockly.Arduino.definitions_[f]);c.length&&c.push("\n");for(f in Blockly.Arduino.codeFunctions_)e.push(Blockly.Arduino.codeFunctions_[f]);
for(f in Blockly.Arduino.userFunctions_)e.push(Blockly.Arduino.userFunctions_[f]);e.length&&e.push("\n");var h=[],k="";void 0!==Blockly.Arduino.setups_.userSetupCode&&(k=Blockly.Arduino.setups_.userSetupCode,delete Blockly.Arduino.setups_.userSetupCode);var g="";for(f in Blockly.Arduino.setups_)h.push(Blockly.Arduino.setups_[f]);h.length&&(g=this.prefixLines(h.join("\n"),this.INDENT),g+="\n");k&&(g+="\n"+k);g="void setup() {\n"+g+"}\n\n";b=b.join("\n")+d.join("\n")+c.join("\n")+e.join("\n\n");a="void loop() {\n"+
a.replace(/\n/g,"\n")+"}\n";delete Blockly.Arduino.includes_;delete Blockly.Arduino.userClass_;delete Blockly.Arduino.definitions_;delete Blockly.Arduino.codeFunctions_;delete Blockly.Arduino.userFunctions_;delete Blockly.Arduino.functionNames_;delete Blockly.Arduino.setups_;delete Blockly.Arduino.pins_;delete Blockly.Arduino.instances_;Blockly.Arduino.variableDB_.reset();return b+g+a};Blockly.Arduino.addInclude=function(a,b){void 0===Blockly.Arduino.includes_[a]&&(Blockly.Arduino.includes_[a]=b)};
Blockly.Arduino.adduserClass=function(a,b){void 0===Blockly.Arduino.userClass_[a]&&(Blockly.Arduino.userClass_[a]=b)};Blockly.Arduino.addDeclaration=function(a,b){void 0===Blockly.Arduino.definitions_[a]&&(Blockly.Arduino.definitions_[a]=b)};Blockly.Arduino.addVariable=function(a,b,c){var d=!1;if(c||void 0===Blockly.Arduino.variables_[a])Blockly.Arduino.variables_[a]=b,d=!0;return d};
Blockly.Arduino.addSetup=function(a,b,c){var d=!1;if(c||void 0===Blockly.Arduino.setups_[a])Blockly.Arduino.setups_[a]=b,d=!0;return d};Blockly.Arduino.addFunction=function(a,b){if(void 0===Blockly.Arduino.codeFunctions_[a]){var c=Blockly.Arduino.variableDB_.getDistinctName(a,Blockly.Generator.NAME_TYPE);Blockly.Arduino.codeFunctions_[a]=b.replace(Blockly.Arduino.DEF_FUNC_NAME,c);Blockly.Arduino.functionNames_[a]=c}return Blockly.Arduino.functionNames_[a]};
Blockly.Arduino.reservePin=function(a,b,c,d){Blockly.Arduino.isUnoPin(b)&&(void 0!==Blockly.Arduino.pins_[b]?Blockly.Arduino.pins_[b]!=c?a.setWarningText("Pin "+b+" is needed for "+(d?d+" as "+c:c)+" Already used as "+Blockly.Arduino.pins_[b],d):a.setWarningText(null,d):(Blockly.Arduino.pins_[b]=c,a.setWarningText(null,d)))};
Blockly.Arduino.requireInstance=function(a,b){var c=Blockly.Arduino.instances_[b];if(!c)return a.setWarningText(b+" was not declared in this scope!","requireInstance"),null;a.setWarningText(null,"requireInstance");return c};Blockly.Arduino.scrubNakedValue=function(a){return a+";\n"};Blockly.Arduino.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/"/g,'\\"').replace(/'/g,"\\'");return'"'+a+'"'};
Blockly.Arduino.scrub_=function(a,b){if(null===b)return"";var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();d&&(c+=this.prefixLines(d,"// ")+"\n");for(var e=0;e<a.inputList.length;e++)a.inputList[e].type==Blockly.INPUT_VALUE&&(d=a.inputList[e].connection.targetBlock())&&(d=this.allNestedComments(d))&&(c+=this.prefixLines(d,"// "))}e=a.nextConnection&&a.nextConnection.targetBlock();e=this.blockToCode(e);return c+b+e};
Blockly.Arduino.noGeneratorCodeInline=function(){return["",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.noGeneratorCodeLine=function(){return""};
Blockly.Arduino.workspaceToCode=function(a){a||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),a=Blockly.getMainWorkspace());var b=[];this.init(a);var c=a.getTopBlocks(!0);a=null;for(var d=0,e;e=c[d];d++)"controlsetuploop"===e.type?a=e:this.blockToCode(e);a&&(c=this.blockToCode(a),goog.isArray(c)&&(c=c[0]),c&&(a.outputConnection&&this.scrubNakedValue&&(c=this.scrubNakedValue(c)),b.push(c)));b=b.join("\n");b=this.finish(b);b=b.replace(/^\s+\n/,"");b=b.replace(/\n\s+$/,"\n");
return b=b.replace(/[ \t]+\n/g,"\n")};Blockly.Arduino.isPWMPin=function(a){a=a.toString();return 0<="3 5 6 9 10 11".split(" ").indexOf(a)?!0:!1};Blockly.Arduino.isAnalogPin=function(a){a=a.toString().toUpperCase();for(var b=0;7>=b;b++)if("A"+b.toString()==a)return!0;return!1};Blockly.Arduino.isDigitalPin=function(a){a=a.toString().toUpperCase();for(var b=0;13>=b;b++)if(b.toString()==a)return!0;for(b=0;5>=b;b++)if("A"+b.toString()==a)return!0;return!1};
Blockly.Arduino.isUnoPin=function(a){a=a.toString().toUpperCase();for(var b=0;13>=b;b++)if(b.toString()==a)return!0;for(b=0;7>=b;b++)if("A"+b.toString()==a)return!0;return!1};Blockly.Arduino.colour={};Blockly.Arduino.colour_picker=function(a){return[a.getFieldValue("COLOUR"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_number=function(a){var b=a=parseFloat(a.getFieldValue("NUM"));isNaN(a)?b="0":Infinity==a?b="INFINITY":-Infinity==a&&(b="-INFINITY");return[b,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_integer=function(a){a=a.getFieldValue("NUM");return[isNaN(a)?"0":a,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.math_whole_number=function(a){a=a.getFieldValue("NUM");return[isNaN(a)?"0":a,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_positive_number=function(a){a=a.getFieldValue("NUM");return[isNaN(a)?"0":a,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_angle=function(a){return[a.getFieldValue("NUM"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.text=function(a){a=a.getFieldValue("TEXT");return[Blockly.Arduino.quote_(a),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.control_if=function(a){for(var b=Blockly.Arduino.valueToCode(a,"IF0",Blockly.Arduino.ORDER_NONE)||"false",c=Blockly.Arduino.statementToCode(a,"DO0"),d="if("+b+"){\n"+c+"}",e=1;e<=a.elseifCount_;e++)b=Blockly.Arduino.valueToCode(a,"IF"+e,Blockly.Arduino.ORDER_NONE)||"false",c=Blockly.Arduino.statementToCode(a,"DO"+e),d+=" else if ("+b+") {\n"+c+"}";a.elseCount_&&(c=Blockly.Arduino.statementToCode(a,"ELSE"),d+=" else {\n"+c+"}");return d+"\n"};
Blockly.Arduino.control_forloop=function(a){var b="for(",c=a.getInput("init").connection.targetBlock();Blockly.Arduino.valueToCode(a,"init",Blockly.Arduino.ORDER_NONE);c&&("instance_create_number"==c.type?b+=c.getFieldValue("NAME")+"="+c.getFieldValue("INITVALUE"):("instance_number_getter"==c.type||"instance_array_getter"==c.type)&&(c=c.getFieldValue("NAME"))&&(b+=c+"="+(Blockly.Arduino.valueToCode(a,"initNumber",Blockly.Arduino.ORDER_ASSIGNMENT)||"0")));b=b+";"+Blockly.Arduino.valueToCode(a,"CONDITION",
Blockly.Arduino.ORDER_NONE);b+=";";if(c=Blockly.Arduino.valueToCode(a,"NAME",Blockly.Arduino.ORDER_ATOMIC)){var d=a.getFieldValue("step");b="="==d||"+="==d||"-="==d?b+(c+d+(Blockly.Arduino.valueToCode(a,"stepNumber",Blockly.Arduino.ORDER_ASSIGNMENT)||"1")):b+(c+d)}b+="){\n";a=Blockly.Arduino.statementToCode(a,"SUBSTACK");return b+a+"}\n"};
Blockly.Arduino.control_while=function(a){var b=Blockly.Arduino.valueToCode(a,"CONDITION",Blockly.Arduino.ORDER_NONE)||"false";a=Blockly.Arduino.statementToCode(a,"SUBSTACK");return"while ("+b+") {\n"+a+"}\n"};Blockly.Arduino.control_break=function(a){return"break;\n"};Blockly.Arduino.control_delay=function(a){return"delay("+Blockly.Arduino.valueToCode(a,"ms",Blockly.Arduino.ORDER_NONE)+");\n"};
Blockly.Arduino.control_delaymicroseconds=function(a){return"delayMicroseconds("+Blockly.Arduino.valueToCode(a,"us",Blockly.Arduino.ORDER_NONE)+");\n"};Blockly.Arduino.control_millis=function(a){return["millis()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.control_micros=function(a){return["micros()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.controlsetuploop=function(a){Blockly.Arduino.setups_.userSetupCode=Blockly.Arduino.statementToCode(a,"SETUPSTACK");return Blockly.Arduino.statementToCode(a,"LOOPSTACK")};Blockly.Arduino.io_readdigitalpin=function(a){return["digitalRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.io_readanalogpin=function(a){return["analogRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.io_writedigitalpin=function(a){var b=Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE);a=Blockly.Arduino.valueToCode(a,"value",Blockly.Arduino.ORDER_NONE);return"digitalWrite("+b+","+a+");\n"};Blockly.Arduino.io_writeanalogpin=function(a){var b=Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE);a=Blockly.Arduino.valueToCode(a,"value",Blockly.Arduino.ORDER_NONE);return"analogWrite("+b+","+a+");\n"};
Blockly.Arduino.io_pinmode=function(a){var b=Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE),c=a.getFieldValue("mode"),d="pinMode("+b+","+c+");\n";Blockly.Arduino.reservePin(a,b,"OUTPUT"==c?"OUTPUT":"INPUT","pinMode");return d};Blockly.Arduino.io_arduino_uno_digitalpin_menu=function(a){return[a.getFieldValue("Pin"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.io_arduino_uno_analogpin_menu=function(a){return[a.getFieldValue("Pin"),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.io_arduino_uno_pwmpin_menu=function(a){return[a.getFieldValue("Pin"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.io_pinstate_menu=function(a){return[a.getFieldValue("state"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.io_tone=function(a){var b=Blockly.Arduino.valueToCode(a,"frequency",Blockly.Arduino.ORDER_NONE);return"tone("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+","+b+");\n"};Blockly.Arduino.io_tone_menu=function(a){return[a.getFieldValue("Tone"),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.io_notone=function(a){return"noTone("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+");\n"};Blockly.Arduino.io_pulsein=function(a){var b=Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE),c=Blockly.Arduino.valueToCode(a,"value",Blockly.Arduino.ORDER_NONE);a=Blockly.Arduino.valueToCode(a,"timeout",Blockly.Arduino.ORDER_NONE);return["pulseIn("+b+","+c+","+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.instance_serial=function(a){var b="Serial.begin("+a.getFieldValue("Bandrate")+");\n";Blockly.Arduino.reservePin(a,0,"RX","Serial");Blockly.Arduino.reservePin(a,1,"TX"," Serial");return b};Blockly.Arduino.serial_print=function(a){var b=a.getFieldValue("action");a=Blockly.Arduino.valueToCode(a,"value",Blockly.Arduino.ORDER_ATOMIC);return"Serial."+b+"("+a+");\n"};Blockly.Arduino.serial_available=function(a){return["Serial.available()",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.serial_read=function(a){return["Serial.read()",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.io_arduino_uno_pin_usable_menu=function(a){return[a.getFieldValue("Pin"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.instance_create_number=function(a){var b=a.getFieldValue("TYPE"),c=a.getFieldValue("NAME");a=a.getFieldValue("INITVALUE")||"0";Blockly.Arduino.addDeclaration(c,b+" "+c+"="+a+";");return[c,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.instance_set_number=function(a){var b=a.getFieldValue("instance_name");Blockly.Arduino.requireInstance(a,b);var c=a.getFieldValue("op");0<=c.indexOf("=")?(a=Blockly.Arduino.valueToCode(a,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT),b=b+c+a):b+=c;return b+";\n"};Blockly.Arduino.instance_number_getter=function(a){var b=a.getFieldValue("NAME");Blockly.Arduino.requireInstance(a,b);return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.instance_create_boolean=function(a){var b=a.getFieldValue("NAME");a=a.getFieldValue("initValue");Blockly.Arduino.addDeclaration(b,"boolean "+b+"="+a+";");return[b,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.instance_set_boolean=function(a){var b=a.getFieldValue("instance_name");Blockly.Arduino.requireInstance(a,b);a=Blockly.Arduino.valueToCode(a,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT);return b+"="+a+";\n"};
Blockly.Arduino.instance_boolean_getter=function(a){var b=a.getFieldValue("NAME");Blockly.Arduino.requireInstance(a,b);return[b,Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.instance_create_string=function(a){var b=a.getFieldValue("NAME");a=a.getFieldValue("initValue");Blockly.Arduino.addDeclaration(b,"String "+b+"="+Blockly.Arduino.quote_(a)+";");return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.instance_set_string=function(a){var b=a.getFieldValue("instance_name");Blockly.Arduino.requireInstance(a,b);a=Blockly.Arduino.valueToCode(a,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT);return b+"="+a+";\n"};Blockly.Arduino.instance_string_getter=function(a){var b=a.getFieldValue("NAME");Blockly.Arduino.requireInstance(a,b);return[b,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.instance_create_array=function(a){var b=a.getFieldValue("TYPE"),c=a.getFieldValue("NAME");a=a.getFieldValue("INITVALUE");Blockly.Arduino.addDeclaration(c,b+" "+c+"["+a+"];");return""};Blockly.Arduino.instance_set_array=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"INDEX",Blockly.Arduino.ORDER_NONE),d=Blockly.Arduino.valueToCode(a,"VALUE",Blockly.Arduino.ORDER_ASSIGNMENT);Blockly.Arduino.requireInstance(a,b);return b+"["+c+"]="+d+";\n"};
Blockly.Arduino.instance_array_getter=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"INDEX",Blockly.Arduino.ORDER_NONE);Blockly.Arduino.requireInstance(a,b);return[b+"["+c+"]",Blockly.Arduino.ORDER_ATOMIC]};function addCommandTextToSetup(a,b){var c=a.getFieldValue(b),d=a.getCommentText();d=d?Blockly.Arduino.prefixLines(d,"// "):"//"+c;Blockly.Arduino.addSetup(c+"_command",d,!1)}function onePinInstanceDefine(a,b){var c=a.getFieldValue("NAME"),d=Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.isUnoPin(d)&&(addCommandTextToSetup(a,"NAME"),Blockly.Arduino.addSetup(c+"_Pin","pinMode("+d+","+b+");",!0),Blockly.Arduino.reservePin(a,d,b,c))}
Blockly.Arduino.instance_rgb=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"R",Blockly.Arduino.ORDER_ATOMIC),d=Blockly.Arduino.valueToCode(a,"G",Blockly.Arduino.ORDER_ATOMIC),e=Blockly.Arduino.valueToCode(a,"B",Blockly.Arduino.ORDER_ATOMIC);(Blockly.Arduino.isPWMPin(c)||Blockly.Arduino.isPWMPin(d)||Blockly.Arduino.isPWMPin(e))&&addCommandTextToSetup(a,"NAME");Blockly.Arduino.isPWMPin(c)&&(Blockly.Arduino.addSetup(b+"_RPin","pinMode("+c+",OUTPUT);",!0),Blockly.Arduino.reservePin(a,
c,"PWM",b+"-R"));Blockly.Arduino.isPWMPin(d)&&(Blockly.Arduino.addSetup(b+"_GPin","pinMode("+d+",OUTPUT);",!0),Blockly.Arduino.reservePin(a,d,"PWM",b+"-G"));Blockly.Arduino.isPWMPin(e)&&(Blockly.Arduino.addSetup(b+"_BPin","pinMode("+e+",OUTPUT);",!0),Blockly.Arduino.reservePin(a,e,"PWM",b+"-B"));return""};
Blockly.Arduino.module_set_rgb=function(a){var b=a.getFieldValue("rgb"),c=Blockly.Arduino.requireInstance(a,b);if(!c)return"\n";b=Blockly.Arduino.valueToCode(c,"R",Blockly.Arduino.ORDER_ATOMIC);var d=Blockly.Arduino.valueToCode(c,"G",Blockly.Arduino.ORDER_ATOMIC);c=Blockly.Arduino.valueToCode(c,"B",Blockly.Arduino.ORDER_ATOMIC);var e=0,f=0,h=0,k=a.getInputTargetBlock("colour");if("rgbtocolor"==k.type)e=Blockly.Arduino.valueToCode(k,"r",Blockly.Arduino.ORDER_NONE)||"0",f=Blockly.Arduino.valueToCode(k,
"g",Blockly.Arduino.ORDER_NONE)||"0",h=Blockly.Arduino.valueToCode(k,"b",Blockly.Arduino.ORDER_NONE)||"0";else if(a=Blockly.Arduino.valueToCode(a,"colour",Blockly.Arduino.ORDER_ATOMIC))try{if(a instanceof Array)e=a[0],f=a[1],h=a[2];else if(a.match(/^#[0-9a-fA-F]{6}$/))e=parseInt(a.substr(1,2),16),f=parseInt(a.substr(3,2),16),h=parseInt(a.substr(5,2),16);else{var g=a.split(",",3);g.length&&(e=g[0]);1<g.length&&(f=g[1]);2<g.length&&(h=g[2])}}catch(l){}g="";Blockly.Arduino.isPWMPin(b)&&(g+="analogWrite("+
b+","+e+");\n");Blockly.Arduino.isPWMPin(d)&&(g+="analogWrite("+d+","+f+");\n");Blockly.Arduino.isPWMPin(c)&&(g+="analogWrite("+c+","+h+");\n");return g};Blockly.Arduino.rgbtocolor=function(a){var b=Blockly.Arduino.valueToCode(a,"r",Blockly.Arduino.ORDER_ATOMIC),c=Blockly.Arduino.valueToCode(a,"g",Blockly.Arduino.ORDER_ATOMIC);a=Blockly.Arduino.valueToCode(a,"b",Blockly.Arduino.ORDER_ATOMIC);var d=[];d.push(b);d.push(c);d.push(a);return[d,Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.instance_led=function(a){onePinInstanceDefine(a,"OUTPUT");return""};
Blockly.Arduino.module_set_led=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"state",Blockly.Arduino.ORDER_NONE),d=!1,e=a.getInput("state").connection.targetConnection;e&&0<=e.check_.indexOf("Number")&&(d=!0);a=Blockly.Arduino.requireInstance(a,b);if(!a)return"\n";a=Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE);return d&&Blockly.Arduino.isPWMPin(a)?"analogWrite("+a+","+c+");\n":"digitalWrite("+a+","+c+");\n"};
Blockly.Arduino.instance_button=function(a){onePinInstanceDefine(a,"INPUT");return""};Blockly.Arduino.module_read_button=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["digitalRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")==LOW",Blockly.Arduino.ORDER_EQUALITY]:"\n"};
Blockly.Arduino.instance_lcd1602=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"RS",Blockly.Arduino.ORDER_NONE),d=Blockly.Arduino.valueToCode(a,"EN",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(a,"D4",Blockly.Arduino.ORDER_NONE),f=Blockly.Arduino.valueToCode(a,"D5",Blockly.Arduino.ORDER_NONE),h=Blockly.Arduino.valueToCode(a,"D6",Blockly.Arduino.ORDER_NONE),k=Blockly.Arduino.valueToCode(a,"D7",Blockly.Arduino.ORDER_NONE);if(1!=(Blockly.Arduino.isDigitalPin(c)&&
Blockly.Arduino.isDigitalPin(d)&&Blockly.Arduino.isDigitalPin(e)&&Blockly.Arduino.isDigitalPin(f)&&Blockly.Arduino.isDigitalPin(h)&&Blockly.Arduino.isDigitalPin(k)))return"";Blockly.Arduino.addInclude("LiquidCrystal","#include <LiquidCrystal.h>");Blockly.Arduino.addDeclaration(b,"LiquidCrystal "+b+"("+c+","+d+","+e+","+f+","+h+","+k+");");Blockly.Arduino.addSetup(b,b+".begin(16,2);",!0);Blockly.Arduino.reservePin(a,c,"OUTPUT",b+"-RS");Blockly.Arduino.reservePin(a,d,"OUTPUT",b+"-EN");Blockly.Arduino.reservePin(a,
e,"OUTPUT",b+"-D4");Blockly.Arduino.reservePin(a,f,"OUTPUT",b+"-D5");Blockly.Arduino.reservePin(a,h,"OUTPUT",b+"-D6");Blockly.Arduino.reservePin(a,k,"OUTPUT",b+"-D7");return""};Blockly.Arduino.module_lcd_print=function(a){var b=a.getFieldValue("NAME");if(!Blockly.Arduino.requireInstance(a,b))return"\n";a=Blockly.Arduino.valueToCode(a,"value",Blockly.Arduino.ORDER_NONE);return b+".print("+a+");\n"};
Blockly.Arduino.module_lcd_clear=function(a){var b=a.getFieldValue("NAME");return Blockly.Arduino.requireInstance(a,b)?b+".clear();\n":"\n"};Blockly.Arduino.module_lcd_goto=function(a){var b=a.getFieldValue("NAME");if(!Blockly.Arduino.requireInstance(a,b))return"\n";var c=Blockly.Arduino.valueToCode(a,"column",Blockly.Arduino.ORDER_NONE)||0;a=Blockly.Arduino.valueToCode(a,"line",Blockly.Arduino.ORDER_NONE)||0;return b+".setCursor("+c+","+a+");\n"};
Blockly.Arduino.instance_buzzer=function(a){onePinInstanceDefine(a,"OUTPUT");return""};Blockly.Arduino.module_set_buzzer=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"state",Blockly.Arduino.ORDER_NONE);return(a=Blockly.Arduino.requireInstance(a,b))?"digitalWrite("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+","+c+");\n":"\n"};Blockly.Arduino.instance_speaker=function(a){onePinInstanceDefine(a,"OUTPUT");return""};
Blockly.Arduino.module_buzzer_playtone=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"frequency",Blockly.Arduino.ORDER_NONE);return(a=Blockly.Arduino.requireInstance(a,b))?"tone("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+","+c+");\n":"\n"};Blockly.Arduino.module_buzzer_notone=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?"noTone("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+");\n":"\n"};
Blockly.Arduino.instance_fanmotor=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"INA",Blockly.Arduino.ORDER_ATOMIC),d=Blockly.Arduino.valueToCode(a,"INB",Blockly.Arduino.ORDER_ATOMIC);(Blockly.Arduino.isDigitalPin(c)||Blockly.Arduino.isDigitalPin(d))&&addCommandTextToSetup(a,"NAME");Blockly.Arduino.isDigitalPin(c)&&(Blockly.Arduino.addSetup(b+"_INA","pinMode("+c+",OUTPUT);",!0),Blockly.Arduino.reservePin(a,c,"PWM",b+"-INA"));Blockly.Arduino.isDigitalPin(d)&&(Blockly.Arduino.addSetup(b+
"_INB","pinMode("+d+",OUTPUT);",!0),Blockly.Arduino.reservePin(a,d,"PWM",b+"-INB"));return""};
Blockly.Arduino.module_set_fanmotor=function(a){var b=a.getFieldValue("NAME"),c=a.getFieldValue("dir"),d=Blockly.Arduino.valueToCode(a,"pwm",Blockly.Arduino.ORDER_ATOMIC)||0;b=Blockly.Arduino.requireInstance(a,b);if(!b)return"\n";a=Blockly.Arduino.valueToCode(b,"INA",Blockly.Arduino.ORDER_NONE);b=Blockly.Arduino.valueToCode(b,"INB",Blockly.Arduino.ORDER_NONE);return"analogWrite("+a+","+("f"==c?d:0)+");\n"+("analogWrite("+b+","+("b"==c?d:0)+");\n")};
Blockly.Arduino.instance_servo=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE);Blockly.Arduino.addInclude("Servo","#include <Servo.h>");Blockly.Arduino.addDeclaration(b,"Servo "+b+";");Blockly.Arduino.addSetup(b,b+".attach("+c+");",!0);Blockly.Arduino.reservePin(a,c,"PWM",b);return""};Blockly.Arduino.angle_picker=function(a){return[a.getFieldValue("ANGLE"),Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.module_servo_write=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"angle",Blockly.Arduino.ORDER_NONE)||0;return Blockly.Arduino.requireInstance(a,b)?b+".write("+c+");\n":"\n"};
Blockly.Arduino.instance_stepper=function(a){var b=a.getFieldValue("NAME"),c=a.getFieldValue("pinNumber"),d=Blockly.Arduino.valueToCode(a,"Pin1",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(a,"Pin2",Blockly.Arduino.ORDER_NONE),f=Blockly.Arduino.valueToCode(a,"Pin3",Blockly.Arduino.ORDER_NONE),h=Blockly.Arduino.valueToCode(a,"Pin4",Blockly.Arduino.ORDER_NONE),k=a.getFieldValue("spv"),g=a.getFieldValue("rpm");Blockly.Arduino.addInclude("Stepper","#include <Stepper.h>");Blockly.Arduino.reservePin(a,
d,"OUTPUT",b+"-Pin1");Blockly.Arduino.reservePin(a,e,"OUTPUT",b+"-Pin2");"F"==c?(c="Stepper "+b+"("+k+","+d+","+f+","+e+","+h+");",Blockly.Arduino.reservePin(a,f,"OUTPUT",b+"-Pin3"),Blockly.Arduino.reservePin(a,h,"OUTPUT",b+"-Pin4")):c="Stepper "+b+"("+k+","+d+","+e+");";Blockly.Arduino.addDeclaration(b,c);Blockly.Arduino.addSetup(b,b+".setSpeed("+g+");",!0);return""};
Blockly.Arduino.module_stepper_move=function(a){var b=a.getFieldValue("NAME");if(!Blockly.Arduino.requireInstance(a,b))return"\n";a=Blockly.Arduino.valueToCode(a,"step",Blockly.Arduino.ORDER_NONE)||0;return b+".step("+a+");\n"};Blockly.Arduino.module_stepper_speed=function(a){var b=a.getFieldValue("NAME");if(!Blockly.Arduino.requireInstance(a,b))return"\n";a=Blockly.Arduino.valueToCode(a,"speed",Blockly.Arduino.ORDER_NONE)||0;return b+".setSpeed("+a+");\n"};
Blockly.Arduino.instance_pir=function(a){onePinInstanceDefine(a,"INPUT");return""};Blockly.Arduino.module_pir_get=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["digitalRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]:"\n"};Blockly.Arduino.instance_potentiometer=function(a){onePinInstanceDefine(a,"INPUT");return""};
Blockly.Arduino.module_potentiometer_get=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["analogRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]:"\n"};Blockly.Arduino.instance_slider=function(a){onePinInstanceDefine(a,"INPUT");return""};
Blockly.Arduino.module_slider_get=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["analogRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]:"\n"};Blockly.Arduino.instance_lightsensor=function(a){onePinInstanceDefine(a,"INPUT");return""};
Blockly.Arduino.module_lightsensor_get=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["analogRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]:"\n"};Blockly.Arduino.instance_lm35=function(a){onePinInstanceDefine(a,"INPUT");return""};
Blockly.Arduino.module_lm35_get=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["analogRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")*0.48828125",Blockly.Arduino.ORDER_MULTIPLICATIVE]:"\n"};Blockly.Arduino.instance_soundsensor=function(a){onePinInstanceDefine(a,"INPUT");return""};
Blockly.Arduino.module_soundsensor_get=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["analogRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]:"\n"};
Blockly.Arduino.instance_ultrasonic=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"trigPin",Blockly.Arduino.ORDER_ATOMIC);a=Blockly.Arduino.valueToCode(a,"echoPin",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.addDeclaration(b,"OseppUltrasonic "+b+"("+c+","+a+");");b=[];b.push("class OseppUltrasonic{");b.push("private:");b.push("  uint8_t _trig_Pin, _echo_pin;");b.push("  float _lastPing;");b.push("  unsigned long _lastEntry;");b.push("public:");b.push("  OseppUltrasonic(uint8_t trig_Pin, uint8_t echo_pin){");
b.push("    _trig_Pin = trig_Pin;");b.push("    _echo_pin = echo_pin;");b.push("    _lastEntry = 0;");b.push("    _lastPing = 0;");b.push("  }");b.push("  float ping(unsigned int max_mm = 4000){");b.push("    if (millis() - _lastEntry < 25)return _lastPing;");b.push("    _lastEntry = millis();");b.push("    pinMode(_trig_Pin, OUTPUT);");b.push("    digitalWrite(_trig_Pin, LOW);");b.push("    pinMode(_echo_pin, INPUT);");b.push("    digitalWrite(_echo_pin, LOW);");b.push("    digitalWrite(_trig_Pin, HIGH);");
b.push("    delayMicroseconds(10);");b.push("    digitalWrite(_trig_Pin, LOW);");b.push("    unsigned long duration = pulseIn(_echo_pin, HIGH, max_mm * 5.5 + 200);");b.push("    if (duration == 0)_lastPing = max_mm;else _lastPing = (float)duration / 5.8;");b.push("    return _lastPing;");b.push("  }");b.push("};");Blockly.Arduino.adduserClass("OseppUltrasonic",b.join("\n"));return""};
Blockly.Arduino.module_ultrasonic_get=function(a){var b=a.getFieldValue("NAME");return Blockly.Arduino.requireInstance(a,b)?[b+".ping()",Blockly.Arduino.ORDER_ATOMIC]:"\n"};
Blockly.Arduino.instance_4dtouch=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"OUT1",Blockly.Arduino.ORDER_NONE),d=Blockly.Arduino.valueToCode(a,"OUT2",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(a,"OUT3",Blockly.Arduino.ORDER_NONE),f=Blockly.Arduino.valueToCode(a,"OUT4",Blockly.Arduino.ORDER_NONE);(Blockly.Arduino.isDigitalPin(c)||Blockly.Arduino.isDigitalPin(d)||Blockly.Arduino.isDigitalPin(e)||Blockly.Arduino.isDigitalPin(f))&&addCommandTextToSetup(a,
"NAME");Blockly.Arduino.isDigitalPin(c)&&(Blockly.Arduino.addSetup(b+"_OUT1","pinMode("+c+",INPUT);",!0),Blockly.Arduino.reservePin(a,c,"INPUT",b+"-OUT1"));Blockly.Arduino.isDigitalPin(d)&&(Blockly.Arduino.addSetup(b+"_OUT2","pinMode("+d+",INPUT);",!0),Blockly.Arduino.reservePin(a,d,"INPUT",b+"-OUT2"));Blockly.Arduino.isDigitalPin(e)&&(Blockly.Arduino.addSetup(b+"_OUT3","pinMode("+e+",INPUT);",!0),Blockly.Arduino.reservePin(a,e,"INPUT",b+"-OUT3"));Blockly.Arduino.isDigitalPin(f)&&(Blockly.Arduino.addSetup(b+
"_OUT4","pinMode("+f+",INPUT);",!0),Blockly.Arduino.reservePin(a,f,"INPUT",b+"-OUT4"));return""};Blockly.Arduino.module_4dtouch_get=function(a){var b=a.getFieldValue("NAME");b=Blockly.Arduino.requireInstance(a,b);if(!b)return"\n";a=a.getFieldValue("CHANNEL");return["digitalRead("+Blockly.Arduino.valueToCode(b,a,Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.instance_flame=function(a){onePinInstanceDefine(a,"INPUT");return""};
Blockly.Arduino.module_read_flame=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["analogRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]:"\n"};Blockly.Arduino.instance_irdetector=function(a){onePinInstanceDefine(a,"INPUT");return""};
Blockly.Arduino.module_read_irdetector=function(a){var b=a.getFieldValue("NAME");return(a=Blockly.Arduino.requireInstance(a,b))?["digitalRead("+Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_NONE)+")",Blockly.Arduino.ORDER_ATOMIC]:"\n"};
Blockly.Arduino.instance_TB6612MotorDriver=function(a){var b=a.getFieldValue("NAME"),c=Blockly.Arduino.valueToCode(a,"DIR",Blockly.Arduino.ORDER_NONE),d=a.getFieldValue("frb"),e=Blockly.Arduino.valueToCode(a,"PWM",Blockly.Arduino.ORDER_NONE);Blockly.Arduino.isDigitalPin(c)&&Blockly.Arduino.reservePin(a,c,"OUTPUT",b+"-DIR");Blockly.Arduino.isDigitalPin(e)&&Blockly.Arduino.reservePin(a,e,"OUTPUT",b+"-PWM");Blockly.Arduino.addDeclaration(b,"OseppTBMotor "+b+"("+c+","+e+("f"==d?"":",LOW")+");");a=[];
a.push("class OseppTBMotor{");a.push("private:");a.push("  uint8_t _dir_pin, _pwm_pin;");a.push("  uint8_t _forward_level;");a.push("public:");a.push("  OseppTBMotor(uint8_t dir_pin, uint8_t pwm_pin, uint8_t forward_level = HIGH){");a.push("    _dir_pin = dir_pin;");a.push("    _pwm_pin = pwm_pin;");a.push("    _forward_level = forward_level;");a.push("    pinMode(_dir_pin, OUTPUT);");a.push("    digitalWrite(_pwm_pin, LOW);");a.push("  }");a.push("  void forward(int pwm){");a.push("    if (pwm < 0){");
a.push("      digitalWrite(_dir_pin, !_forward_level);");a.push("      pwm=-pwm;");a.push("    }else{");a.push("      digitalWrite(_dir_pin, _forward_level);");a.push("    }");a.push("    analogWrite(_pwm_pin, pwm > 255 ? 255 : pwm);");a.push("  }");a.push("  void backward(int pwm){");a.push("    forward(-pwm);");a.push("  }");a.push("};");Blockly.Arduino.adduserClass("OseppTBMotor",a.join("\n"));return""};
Blockly.Arduino.module_set_TB6612MotorDriver=function(a){var b=a.getFieldValue("NAME"),c=a.getFieldValue("dir"),d=Blockly.Arduino.valueToCode(a,"pwm",Blockly.Arduino.ORDER_ATOMIC)||0;if(!Blockly.Arduino.requireInstance(a,b))return"\n";a=b+".";return"s"==c?a+"forward(0);\n":"f"==c?a+("forward("+d+");\n"):a+("backward("+d+");\n")};
Blockly.Arduino.instance_RangeFinder=function(a){var b=a.getFieldValue("NAME");a=Blockly.Arduino.valueToCode(a,"Pin",Blockly.Arduino.ORDER_ATOMIC);Blockly.Arduino.addDeclaration(b,"OseppRangeFinder "+b+"("+a+");");b=[];b.push("class OseppRangeFinder{");b.push("private:");b.push("  uint8_t _sig_Pin;");b.push("  float _lastPing;");b.push("  unsigned long _lastEntry;");b.push("public:");b.push("  OseppRangeFinder(uint8_t sig_Pin){");b.push("    _sig_Pin = sig_Pin;");b.push("    _lastEntry = 0;");b.push("    _lastPing = 0;");
b.push("  }");b.push("  float ping(unsigned int max_mm = 4000){");b.push("    if (millis() - _lastEntry < 25)return _lastPing;");b.push("    _lastEntry = millis();");b.push("    pinMode(_sig_Pin, INPUT);");b.push("    if (digitalRead(_sig_Pin) == HIGH)return _lastPing;");b.push("    pinMode(_sig_Pin, OUTPUT);");b.push("    digitalWrite(_sig_Pin, HIGH);");b.push("    delayMicroseconds(10);");b.push("    digitalWrite(_sig_Pin, LOW);");b.push("    pinMode(_sig_Pin, INPUT);");b.push("    unsigned long duration = pulseIn(_sig_Pin, HIGH, max_mm * 5.5 + 200);");
b.push("    if (duration == 0)_lastPing = max_mm;else _lastPing = (float)duration / 5.8;");b.push("    return _lastPing;");b.push("  }");b.push("};");Blockly.Arduino.adduserClass("OseppRangeFinder",b.join("\n"));return""};Blockly.Arduino.module_RangeFinder_Ping=function(a){var b=a.getFieldValue("NAME");return Blockly.Arduino.requireInstance(a,b)?[b+".ping()",Blockly.Arduino.ORDER_ATOMIC]:"\n"};
Blockly.Arduino.module_OseppRemote_Feed=function(a){var b=a.getFieldValue("NAME");return Blockly.Arduino.requireInstance(a,b)?[b+".ping()",Blockly.Arduino.ORDER_ATOMIC]:"\n"};
Blockly.Arduino.addClass_instance_OseppRemote=function(){var a=[];a.push("class OseppRemote");a.push("{");a.push("private:");a.push("  char letter;");a.push("  int number;");a.push("  char minusSign;");a.push("  char tempButton;");a.push("  char mButtonState;");a.push("  int mChannel[7];");a.push("  unsigned long mLast_Data_millis;");a.push("public:");a.push("  OseppRemote(){");a.push("    letter = 0;");a.push("    number = 0;");a.push("    minusSign = 0;");a.push("    mButtonState = 0;");a.push("    tempButton = 0;");
a.push("    mLast_Data_millis = millis();");a.push("  }");a.push("  void update(){");a.push("    while (Serial.available()){");a.push("      char data = Serial.read();");a.push("      mLast_Data_millis = millis();");a.push("      if ((data >= '0') && (data <= '9')){");a.push("        number *= 10;");a.push("        number += data - '0';");a.push("      }else if (data == '-'){");a.push("        minusSign = 1;");a.push("      }else{");a.push("        if (minusSign)number = -number;");a.push("        switch (letter)");
a.push("        {");a.push("        case 'u':mChannel[0] = number;break;");a.push("        case 'v':mChannel[1] = number;break;");a.push("        case 'w':mChannel[2] = number;break;");a.push("        case 'a':mChannel[3] = number;break;");a.push("        case 'x':mChannel[4] = number;break;");a.push("        case 'y':mChannel[5] = number;break;");a.push("        case 'z':mChannel[6] = number;break;");a.push("        default:break;");a.push("        }");a.push("        number = 0;");a.push("        minusSign = 0;");
a.push("        switch (data)");a.push("        {");a.push("        case 'L':tempButton |= 1;break;");a.push("        case 'R':tempButton |= 2;break;");a.push("        case 'U':tempButton |= 4;break;");a.push("        case 'D':tempButton |= 8;break;");a.push("        case 'A':tempButton |= 16;break;");a.push("        case 'B':tempButton |= 32;break;");a.push("        case 'X':tempButton |= 64;break;");a.push("        case 'Y':tempButton |= 128;break;");a.push("        case '\\n':mButtonState = tempButton;tempButton = 0;break;");
a.push("        default:break;");a.push("        }");a.push("        letter = data;");a.push("      }");a.push("    }");a.push("  }");a.push("  uint8_t getButtonState(uint8_t mask){");a.push("    update();");a.push("    return mButtonState & mask;");a.push("  }");a.push("  int getChannalData(uint8_t channel){");a.push("    update();");a.push("    return mChannel[channel];");a.push("  }");a.push("  bool isTimeoutFor(unsigned long howlong){");a.push("    update();");a.push("    if (millis() - mLast_Data_millis > howlong)return true;");
a.push("    return false;");a.push("  }");a.push("};");Blockly.Arduino.adduserClass("OseppRemote",a.join("\n"));Blockly.Arduino.addDeclaration("remoteController","OseppRemote remoteController;")};Blockly.Arduino.instance_OseppRemote=function(a){a.getFieldValue("NAME");Blockly.Arduino.addClass_instance_OseppRemote();return"remoteController.update();\n"};
Blockly.Arduino.module_OseppRemote_Button=function(a){Blockly.Arduino.addClass_instance_OseppRemote();return["remoteController.getButtonState("+a.getFieldValue("CHANNEL")+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.module_OseppRemote_Channel=function(a){Blockly.Arduino.addClass_instance_OseppRemote();return["remoteController.getChannalData("+a.getFieldValue("CHANNEL")+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.module_OseppRemote_isTimeout=function(a){Blockly.Arduino.addClass_instance_OseppRemote();return["remoteController.isTimeoutFor("+(Blockly.Arduino.valueToCode(a,"time",Blockly.Arduino.ORDER_ATOMIC)||0)+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.arithmeticoperators=function(a){var b=a.getFieldValue("Operators"),c="+"===b||"-"===b?Blockly.Arduino.ORDER_ADDITIVE:Blockly.Arduino.ORDER_MULTIPLICATIVE,d=Blockly.Arduino.valueToCode(a,"NUM1",c);a=Blockly.Arduino.valueToCode(a,"NUM2",c);return[d+b+a,c]};
Blockly.Arduino.comparisonoperators=function(a){var b=a.getFieldValue("Operators"),c="=="===b||"!="===b?Blockly.Arduino.ORDER_EQUALITY:Blockly.Arduino.ORDER_RELATIONAL,d=Blockly.Arduino.valueToCode(a,"NUM1",c);a=Blockly.Arduino.valueToCode(a,"NUM2",c);return[d+b+a,c]};
Blockly.Arduino.booleanoperators=function(a){var b=a.getFieldValue("Operators"),c="||"===b?Blockly.Arduino.ORDER_LOGICAL_OR:Blockly.Arduino.ORDER_LOGICAL_AND,d=Blockly.Arduino.valueToCode(a,"NUM1",c)||"false";a=Blockly.Arduino.valueToCode(a,"NUM2",c)||"false";return[d+b+a,c]};Blockly.Arduino.notoperators=function(a){return["!"+(Blockly.Arduino.valueToCode(a,"NUM2",Blockly.Arduino.ORDER_UNARY_PREFIX)||"true"),Blockly.Arduino.ORDER_UNARY_PREFIX]};
Blockly.Arduino.mathminmax=function(a){var b=a.getFieldValue("OPERATOR"),c=Blockly.Arduino.valueToCode(a,"NUM1",Blockly.Arduino.ORDER_NONE);a=Blockly.Arduino.valueToCode(a,"NUM2",Blockly.Arduino.ORDER_NONE);return[b+"("+c+","+a+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.mathoperators=function(a){var b=a.getFieldValue("OPERATOR");a=Blockly.Arduino.valueToCode(a,"NUM",Blockly.Arduino.ORDER_NONE);return[b+"("+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.mathconstrain=function(a){var b=Blockly.Arduino.valueToCode(a,"X",Blockly.Arduino.ORDER_NONE),c=Blockly.Arduino.valueToCode(a,"A",Blockly.Arduino.ORDER_NONE);a=Blockly.Arduino.valueToCode(a,"B",Blockly.Arduino.ORDER_NONE);return["constrain("+b+","+c+","+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.mathmap=function(a){var b=Blockly.Arduino.valueToCode(a,"X",Blockly.Arduino.ORDER_NONE),c=Blockly.Arduino.valueToCode(a,"FL",Blockly.Arduino.ORDER_NONE),d=Blockly.Arduino.valueToCode(a,"FH",Blockly.Arduino.ORDER_NONE),e=Blockly.Arduino.valueToCode(a,"TL",Blockly.Arduino.ORDER_NONE);a=Blockly.Arduino.valueToCode(a,"TH",Blockly.Arduino.ORDER_NONE);return["map("+b+","+c+","+d+","+e+","+a+")",Blockly.Arduino.ORDER_ATOMIC]};
Blockly.Arduino.mathrandom=function(a){var b=Blockly.Arduino.valueToCode(a,"L",Blockly.Arduino.ORDER_NONE);a=Blockly.Arduino.valueToCode(a,"H",Blockly.Arduino.ORDER_NONE);return["random("+b+","+a+")",Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.math_boolean_menu=function(a){return[a.getFieldValue("state"),Blockly.Arduino.ORDER_ATOMIC]};Blockly.Arduino.instance_procedure=function(a){var b=a.getFieldValue("NAME");a=(a=Blockly.Arduino.statementToCode(a,"statement"))?Blockly.Arduino.prefixLines(a,Blockly.Arduino.INDENT):"\n";Blockly.Arduino.userFunctions_[b]="void "+b+"(){\n"+a+"}\n";return""};Blockly.Arduino.instance_procedure_call=function(a){var b=a.getFieldValue("NAME");Blockly.Arduino.requireInstance(a,b);return b+"();\n"};Blockly.Arduino.procedure_return=function(a){return"return;\n"};